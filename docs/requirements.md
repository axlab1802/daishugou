# 酔いどれ大富豪 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
酔いどれ大富豪（Yoidore Daifugo）

### 1.2 コンセプト
トランプの大富豪をベースに、カードを「お酒」に置き換えたカードゲーム。
酒の強さ（アルコール度数イメージ）でカードの強弱が決まり、特殊コンボで逆転が可能。

### 1.3 ターゲットユーザー
- カジュアルゲーマー
- 大富豪ルールを知っている人
- 居酒屋・お酒が好きな人
- 1人でも複数人でも遊びたい人

### 1.4 プラットフォーム
- Webブラウザ（PC/スマートフォン）
- Vercel へデプロイし、モバイルで最大6人オンライン対戦

---

## 2. 機能要件

### 2.1 ゲームモード

| ID | 機能 | 優先度 | 説明 |
|----|------|--------|------|
| F-001 | CPU対戦モード | 必須 | 1人 vs CPU（kiyoshi） |
| F-002 | 難易度選択 | 任意 | CPU の強さを選択可能 |
| F-003 | オンライン対戦 | 必須 | 2〜6人でのオンライン対戦 |
| F-004 | CPU人数選択 | 必須 | 1人+CPU1〜5人で対戦可能 |
| F-005 | ニックネーム保存 | 必須 | 一度登録した名前を次回自動入力 |

### 2.2 ゲームフロー

| ID | 機能 | 優先度 | 説明 |
|----|------|--------|------|
| F-010 | ゲーム画面 | 必須 | メインのプレイ画面 |
| F-011 | ルール説明 | 必須 | カード強弱・コンボ一覧を表示 |
| F-012 | 結果表示 | 必須 | 勝敗結果とリプレイ |
| F-013 | オンラインロビー | 必須 | ルーム作成/参加/開始/退出 |

### 2.3 ゲームプレイ機能

| ID | 機能 | 優先度 | 説明 |
|----|------|--------|------|
| F-020 | カード配布 | 必須 | 参加人数に応じた配布枚数 |
| F-021 | 先攻決定 | 必須 | 水（3）所持者を優先 |
| F-022 | カード選択 | 必須 | 手札から出すカードを選択 |
| F-023 | カード出し | 必須 | 選択したカードを場に出す |
| F-024 | パス機能 | 必須 | カードを出さずにパス |
| F-025 | 場流し | 必須 | 全員パスで場をリセット |
| F-026 | 勝敗判定 | 必須 | 手札を出し切った順で順位決定 |
| F-027 | 追加ルール設定 | 必須 | 追加ルールのON/OFF |

### 2.4 特殊ルール機能

| ID | 機能 | 優先度 | 説明 |
|----|------|--------|------|
| F-030 | 複数枚出し | 必須 | 同じランクのカードを複数枚同時に出せる |
| F-031 | 革命 | 必須 | 同じカード4枚出しで強さ逆転 |
| F-032 | 特殊コンボ | 必須 | 特定の組み合わせで通常より強いカードに勝てる |
| F-033 | コンボヒント | 必須 | 使用可能なコンボがある時に強調表示 |
| F-034 | ジョーカー | 必須 | ジョーカーは最上位カード |

### 2.5 UI/UX機能

| ID | 機能 | 優先度 | 説明 |
|----|------|--------|------|
| F-040 | カードアニメーション | 必須 | カード選択/出しのアニメーション |
| F-041 | コンボ演出 | 必須 | コンボ発動時の演出 |
| F-042 | ターン表示 | 必須 | 現在のターンを明示 |
| F-043 | 残り枚数表示 | 必須 | 各プレイヤーの残り手札枚数 |
| F-044 | 革命インジケーター | 必須 | 革命中であることを明示 |
| F-045 | レスポンシブ対応 | 必須 | スマホで快適にプレイ可能 |
| F-046 | 最大6人レイアウト | 必須 | 6人対戦時の座席配置 |
| F-047 | ゲーム中簡易表示 | 必須 | 開始後は操作・場を中心に表示 |
| F-048 | 効果音 | 必須 | 操作/演出の効果音 |
| F-049 | 角ラベル強化 | 必須 | カード上下の数字横に酒名を同サイズで表示 |
| F-050 | モバイル1画面表示 | 必須 | 相手情報・場・手札・操作ボタンを1画面に収める |

---

## 3. 非機能要件

### 3.1 パフォーマンス

| ID | 要件 | 目標値 |
|----|------|--------|
| NF-001 | 初回ロード時間 | 3秒以内 |
| NF-002 | 操作レスポンス | 100ms以内 |
| NF-003 | アニメーション | 60fps維持 |

### 3.2 対応環境

| ID | 要件 | 詳細 |
|----|------|------|
| NF-010 | ブラウザ | Chrome, Safari, Firefox, Edge（最新版） |
| NF-011 | デバイス | PC, タブレット, スマートフォン |
| NF-012 | 画面サイズ | 320px〜1920px |

### 3.3 セキュリティ/認証

| ID | 要件 | 詳細 |
|----|------|------|
| NF-020 | 認証 | ルームコード + playerId のみ（最低限） |
| NF-021 | 退出処理 | 無人のルームは自動削除 |

---

## 4. 制約条件
- Vercel にデプロイし、Vercel Redis（`REDIS_URL`）を利用して状態を保存
- 通信はポーリング方式を継続
- 追加ライブラリは最小限

---

## 5. 将来の拡張案
| 優先度 | 機能 |
|--------|------|
| 高 | WebSocket/SSE によるリアルタイム化 |
| 中 | 観戦モード |
| 中 | ルール拡張（縛り/階段など） |
| 低 | 実績・称号システム |
